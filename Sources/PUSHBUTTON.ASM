    XDEF PUSHBUTTON

    XREF PORT_P
    XREF PORT_S
    XREF PUSHBUTTONFLAG
    XREF PUSHBUTTONTOGGLE
    XREF RIDEINMOTIONFLAG
    XREF PUSHBUTTONTIMER
    
    
    
    
    PUSHBUTTON:
    PSHX
    PSHY
    PSHD

    LDAA RIDEINMOTIONFLAG		;PUSHBUTTON ONLY USED FOR RIDE IN MOTION 
    CMPA #1
    BNE JUMPTOENDOFPUSHBUTTON
    
    
    ;ELSE DO PUSHBUTTON
    JMP DO_PUSHBUTTONSHIT
   
    
    JUMPTOENDOFPUSHBUTTON:
    JMP END_PUSHBUTTON
    






DO_PUSHBUTTONSHIT:

      BRCLR PORT_P,#%00100000,PUSHBUTTONPRESSED 
      
      
      
      JMP ENDPUSHBUTTONPRESSED
    
    
    PUSHBUTTONPRESSED:

      MOVB #$FF,PORT_S
      MOVB #1,PUSHBUTTONFLAG				;THE RTI WILL SET A TIMER BECAUSE OF THIS

     ; COM PUSHBUTTONTOGGLE
     ; LDAA PUSHBUTTONTOGGLE
     ; ANDA #%00000001
     ; STAA PUSHBUTTONTOGGLE





ENDPUSHBUTTONPRESSED:

    MOVB #0,PUSHBUTTONPRESSED				;SET FLAGS CAUSED BY PUSHBUTTON, LOWER PUSHBUTTON FLAG, IT HAS BEEN DEALT WITH
    
    
    
    
    
    
    
    
    
    
    
       
    END_PUSHBUTTON:
                   PULD
                   PULY
                   PULX
                   
                   RTS